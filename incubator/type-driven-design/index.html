<!DOCTYPE html>
<html>
    <head>
      <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>Type Driven Design</title>
<meta name="viewport" content="width=device-width">
<link rel="shortcut icon" href="favicon.ico" type="image/vnd.microsoft.icon" />
<!-- syntax highlighting CSS -->
<!--link rel="stylesheet" href="/css/syntax.css"-->

<!-- Custom CSS -->
<link rel="stylesheet" href="/assets/application-1070e5396a9f348b2c31565a8ca2ade6.css">

<!-- Custom JS -->
<script src="/assets/vendor/jquery-2.1.1-fbf0c31ef61d80bbbc98a9cdfc7e6632.js"></script>
<script src="/assets/vendor/jquery.validate-466ee815d7a2fb9b74b895b6a0f9551c.js"></script>
<script src="/assets/vendor/scrollup/jquery.scrollUp-d730604bacd24a59da00d38b42cd77af.js"></script>
<script src="/assets/vendor/drupal_legacy-d5580e3eaf6de5a1446255d180dc73d3.js"></script>
<script src="/assets/vendor/angular.min-dfd2efe0eaac3581c5faf5cfed3b159e.js"></script>
<script src="/assets/meetup_events-5782f731b79266fd93b159cb798cc3d5.js"></script>
<script src="/assets/contact-897905f16738b8c5c1688eefae319441.js"></script>
<script src="/assets/application-07f972327fcb4602f91f1e8ba4b78498.js"></script>

<!-- ShareThis JS for posts section -->
<script type="text/javascript" src="http://w.sharethis.com/button/buttons.js"></script>
<script type="text/javascript">stLight.options({publisher: "6ae64a50-63a5-4021-a8de-b0adce0ce99b", doNotHash: false, doNotCopy: false, hashAddressBar: false});</script>

    </head>

    <body class="one-sidebar sidebar-second section-jsandroidjavarubydevops page-node node-type-article all-pages with-navigation with-subnav featured dir-ltr">
        <div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&appId=519865898033052&version=v2.0";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
        <div id="header-first">
  <div class="region region-header-first">
    <div id="block-search-form" class="block block-search block-odd">

      <div class="content">
        <form id="search-block-form" accept-charset="UTF-8"><div><div class="container-inline">
              <h2 class="element-invisible">Search form</h2>
              <div class="form-item form-type-textfield form-item-search-block-form">
                <label class="element-invisible" for="edit-search-block-form--2">Search </label>
                <input title="Enter the terms you wish to search for." placeholder="Search" type="search" id="edit-search-block-form--2" name="search_block_form" value="" size="15" maxlength="128" class="form-text">
              </div>
              <div class="form-actions form-wrapper" id="edit-actions"><input type="submit" id="edit-submit" name="op" value="Search" class="form-submit"></div><input type="hidden" name="form_build_id" value="form-hCEJ23kB0sHlr4dB3Yv5-2cDcH10yNwGSUn69WjCjF4">
              <input type="hidden" name="form_id" value="search_block_form">
            </div>
      </div></form>  </div><!-- /.content -->
    </div><!-- /.block -->
    <div id="block-menu-menu-top-links" class="block block-menu block-even">

      <div class="content">
        <ul class="menu clearfix"><li class="first last leaf login"><a href="/user" title="">login</a></li>
      </ul>  </div><!-- /.content -->
    </div><!-- /.block -->
    <div id="block-menu-menu-language" class="block block-menu block-odd">
      
      <div class="content">
        <ul class="menu clearfix"><li class="first last leaf עברית"><a href="/hebrew" title="">עברית</a></li>
      </ul>  </div><!-- /.content -->
    </div><!-- /.block -->
  </div>
</div>
<div id="google-search-form" style="visibility:hidden; width: 1px; height: 1px; float:right;">
  <script>

    (function() {
        var cx = '012617499894110201007:qu0yvmmzksu';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = false;
        gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
                '//www.google.com/cse/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
    })();
</script>
<gcse:searchresults-only linkTarget="_self"></gcse:searchresults-only>


<script>
    $(document).ready(function() {
        $('#search-block-form').submit(function (e) {
            e.preventDefault();

            //find google search form
            var form = $('.gsc-control-wrapper-cse').find('form');
            var input = form.find("input[name='search']");
            var btn = form.find("input[type='image']");
            var tikalSearch = $('#edit-search-block-form--2');
            tikalSearch.blur();
            $("#bg").show();
            input.val(tikalSearch.val());
            //form.submit();
            btn.click();

        });
        
    });


</script>

</div>

        <header id="header" role="banner">
  <div class="logo-and-region-header">
    <div class="background-logo"></div>
    <a href="/" title="Home" rel="home" id="logo">
      <img src="/assets/logo-ebc269c722e9e1e11b3252c442c75750.png" alt="Home">
    </a>


    <div class="region region-header">
      <section id="block-menu-menu-header-menu" class="block block-menu block-even">
        <h2 class="block-title element-invisible">Header menu</h2>

        <div class="content">
          <ul class="menu clearfix">
            
              
              <li class="leaf"><a href="/about" class="">About</a></li>
            
              
              <li class="leaf"><a href="/solutions" class="">Solutions</a></li>
            
              
              <li class="leaf"><a href="/careers" class="">Careers</a></li>
            
              
              <li class="leaf"><a href="/events" class="">Events</a></li>
            
              
              <li class="leaf"><a href="/contact" class="">Contact</a></li>
            
        </ul>  </div><!-- /.content -->
      </section><!-- /.block -->
      <section id="block-menu-menu-domains" class="block block-menu block-odd">
        <h2 class="block-title element-invisible">Domains</h2>

        <div class="content">
          <ul class="menu clearfix"><li class="first leaf devops"><a href="/devops" title="">DevOps</a></li>
            <li class="leaf java"><a href="/java" title="">JAVA</a></li>
            <li class="leaf js"><a href="/js" title="">JS</a></li>
            <li class="leaf android"><a href="/android" title="">Android</a></li>
            <li class="last leaf ruby"><a href="/ruby" title="">Ruby</a></li>
        </ul>  </div><!-- /.content -->
      </section><!-- /.block -->
    </div>
  </div><!-- /#logo-and-region-header -->
</header>

        <div class="featured-background">
  <div id="featured">
    <div class="region-title-and-featured">
      <h1 class="title" id="page-title">Type Driven Design</h1>
      <div class="region region-featured">
        <div id="block-views-author-block" class="block block-views">
          <div class="content">
            <div class="view view-author view-id-author view-display-id-block">
  <div class="view-content">
    <div class="view-content-limit">
      <div class="view-content-limit-content">
        <div class="views-row">
          <div class="views-field views-field-picture">
            <div class="field-content">
              
                <img src="/assets/pictures/profile-default-ab65955ebe8cf05005dc2e1ae497d862.jpg" width="307" height="230" alt="">
              
            </div>  
          </div>
          <div class="views-field views-field-field-first-name">
            <div class="field-content"></div>
          </div>
          <div class="views-field views-field-field-last-name">
            <div class="field-content"></div>
          </div>
          <div class="views-field views-field-field-description">
            <div class="field-content"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

          </div>
        </div>
      </div>
    </div>
  </div>
</div>

        <div class="shadow-page"></div>
        <div id="page">
          <div id="main">
            <div class="region region-content">
              <div id="block-system-main" class="block block-system">
                <div class="content">
                  <article class="node node-article published with-comments node-full">
                    <header>
  <div class="by-and-tags">
    <div class="by">
      <div class="label-by">by</div>
      <div class="name">
        
      </div>
    </div>
    <div class="tags">
      <div class="label-tags">tags:</div>
      <div class="float-tags">
        <div class="field field-name-field-tags field-type-taxonomy-term-reference field-label-hidden clearfix">
          <ul class="links">
            
              <li>
                <a href="/tags/Incubator">Incubator</a>
              </li>
            
              <li>
                <a href="/tags/scala-typing">scala typing</a>
              </li>
            
              <li>
                <a href="/tags/design">design</a>
              </li>
            
          </ul>
        </div>
      </div>
    </div>
  </div>
  <time pubdate="" datetime="2011-11-29 00:00:00 +0200">
        <div class="day">29</div>
        Nov. 2011
      </time>
  
  
  


<span class="share-buttons">
  <span st_url='http://tikalk.com/incubator/type-driven-design' st_title='Type Driven Design' class='st_facebook_hcount' displayText='Facebook'></span>
  <span st_url='http://tikalk.com/incubator/type-driven-design' st_title='Type Driven Design' class='st_linkedin_hcount' displayText='LinkedIn'></span>
  <span st_url='http://tikalk.com/incubator/type-driven-design' st_title='Type Driven Design' class='st_twitter_hcount' displayText='Tweet'></span>
  <span st_url='http://tikalk.com/incubator/type-driven-design' st_title='Type Driven Design' class='st_fblike_hcount' displayText='Facebook Like'></span>
  <span st_url='http://tikalk.com/incubator/type-driven-design' st_title='Type Driven Design' class='st_plusone_hcount' displayText='Google +1'></span>
</span>
</header>

                    <p>When writing code in a statically typed language sometimes types are considered as orthogonal to the logic of the code. We write them to appease the compiler, or get performance or intellisense &amp;&nbsp;navigation, but all of these has no relation to the code itself.</p>

<p>&nbsp;</p>

<p>This is wrong.</p>

<p>&nbsp;</p>

<p>According to the <a href="http://en.wikipedia.org/wiki/Curry%E2%80%93Howard_correspondence">Curry-Howard Correspondance</a>, types can be interpreted as logical statements. For example, consider an application dealing with people. Our most basic entity might be (I&#39;m using Scala here):</p>

<p>&nbsp;</p>

<pre class="brush: scala;" title="code">
case class Person(name: String)
</pre>

<p>What this means is there&#39;s a logical implication Person =&gt;&nbsp;String. This literally means &quot;A person has a string&quot;. Which is silly. What we want is to encode &quot;A person has a name&quot;:</p>

<pre class="brush: java;" title="code">
case class Name(s: String)
case class Person(name: Name)</pre>
<p>&nbsp;</p>
<p>(In Scala we can go further:&nbsp;We don&#39;t have to box the string inside a Name class. Instead, we can define an empty trait Named, and a type alias Name for &#39;String with Named&#39;. See Eric Torreborre&#39;s <a href="http://etorreborre.blogspot.com/2011/11/practical-uses-for-unboxed-tagged-types.html">excellent post</a> on this subject)</p>
<p>&nbsp;</p>
<p>Now methods that are supposed to work with names, accept an argument of type Name, instead of String. These methods encode further logic. Our application might have a registry of all people:</p>
<pre class="brush: scala;" title="code">
trait Registry {
  def getPerson(name: Name): Person
}</pre>
<p>&nbsp;</p>
<p>This encoding means that given a Registry and&nbsp; a Name, we have a Person. If this is not true all the time (maybe some people are not registered), then we can encode:</p>
<pre class="brush: scala;" title="code">
trait Registry {
  def getPerson(name: Name): Option[Person]
}</pre>
<p>&nbsp;</p>
<p>Which means that given a Registry and a Name we can either get a Person or None.</p>
<p>&nbsp;</p>
<h3>
    About untyped languages</h3>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>In untyped languages such as Ruby or Python, we can&#39;t encode these logical assertions. When the code base is small, and there are few members of the team, this is manageable, since peopl keep these assertions in their heads. Once the code base starts to grow, it becomes more and more difficult to keep track.</p>
<p>&nbsp;</p>
<p>Some suggest that test-driven-development solves this: if all tests pass, and code coverage is 100%, then the code is sound. I&nbsp;have 2 problems with this:</p>
<ol>
    <li>
        Getting at 100% code coverage is hard. And after you do, it means refactoring is hard since it means rewriting (manually)&nbsp;a lot of tests</li>
    <li>
        Code coverage is not enough. Some logical issues are &quot;between the lines&quot;&nbsp;of the code</li>
</ol>
<p>About the second point, lets consider this untyped pseudo code:</p>
<p>&nbsp;</p>
<pre class="brush: scala;" title="code">
def factorial(n) = {
  if (n == 1) 1
  else n * factorial(n - 1)
}</pre>
<p>&nbsp;</p>
<p>It is trivial to write a test that obtains 100% code coverage for this method. But this method is not correct. It does not work for negative numbers.</p>
<p>&nbsp;</p>
<p>Here is the typed version:</p>
<pre class="brush: scala;" title="code">
def factorial(n: Int) = {
  if (n == 1) 1
  else n * factorial(n - 1)
}</pre>
<p>&nbsp;</p>
<p>Well, this version fails for negative numbers. But there is a clear destinction here:&nbsp;because of the type, we can have automatic test generation, such as <a href="http://code.google.com/p/scalacheck/">ScalaCheck</a> (or see <a href="http://www.tikalk.com/java/automatic-unit-test-generation-java">Java alternatives</a>). These tools will test the code with a range of integers including negatives, 0, etc. They can do that because the argument is typed.</p>
<p>&nbsp;</p>
<p>I&#39;m sure there are such frameworks in untyped languages. Something that allows you to write &#39;integers.test(factorial)&#39;. But if we use this, then it means we&#39;re typing our arguments in the test (saying the &#39;n&#39; is an int), then why not type it in the source code and have all the other benefits of typing?&nbsp;</p>
<p>&nbsp;</p>
<h3>
    Inferring behavior from type</h3>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>Another example of where types help is they can allow to infer behavior. In Scala this is done with implicit arguments. Consider this method:</p>
<pre class="brush: scala;" title="code">
def sort[A](l: List[A]): List[A]
</pre>

<p>There is no way to write this method. The reason is that sort needs to compare the elements&nbsp;(without resolving to reflection hacking). Another approach is this:</p>

<pre class="brush: scala;" title="code">
def sort[A &lt;: Comparable](l: List[A]): List[A]
</pre>

<p>Now we&#39;ve endoded that for every list of Comparable elements, it can be sorted. This is nice, but it means that elements are subtype of Comparable, which may not always be true&nbsp;(primitives, 3rd party code). It also means there&#39;s one way to compare. A better approach is this:</p>

<pre class="brush: scala;" title="code">
def sort[A](l: List[A], c: Comparator[A]): List[A]
</pre>

<p>Which means that given a list and a way to compare elements, we can get a sorted list. However, such a code is not very nice to use, since every call must now contain another argument which the client needs to provide.</p>

<p>Scala has implicit arguments. This feature uses the type in a method signature to find instances&nbsp; required for arguments:</p>

<pre class="brush: scala;" title="code">
def sort[A : Ordering](list: List[A]): List[A]</pre>

<p>This reads as &#39;for all A with associated or explicit Ordering, a list of A can be sorted&#39;.<br />
    Now we can supply implicit values for various types and the compiler will create the code that uses the right value for each call of sort. This is only possible because we have the type to tell the compiler what to find.</p>

<p>&nbsp;</p>

<p>I&nbsp;hope this post convinced you to use types to encode the logic of your program. TDD&nbsp;FTW!</p>

                    <div class="fb-comments" data-href="http://tikalk.com/incubator/type-driven-design" data-width="600px" data-numposts="5" data-colorscheme="light"></div>
                    <footer></footer>
                  </article>
                </div>
              </div>
            </div>
          </div>
        </div>
        <footer id="footer" role="contentinfo">
  <div class="region region-footer">
    <section id="block-block-2" class="block block-block block-about-tikal block-even">
      <h2 class="block-title">About Tikal</h2>

      <div class="content">
        <div>
          <div>
            For over 12 years, we have helped breakthrough companies achieve excellence and meet their goals.&nbsp;</div>
          <div>
            By doing so we've earned recognition for delivering extremely competitive and high-performance software services to clients worldwide.</div>
        </div>
        <div class="contact-title">
          Contact Information</div>
        <div class="contact-number">
          (972) 3 6488618</div>
        <div class="contact-mail">
          <a href="">info@tikalk.com</a></div>
      </div><!-- /.content -->
    </section><!-- /.block -->
    <section id="block-webform-client-block-22" class="block block-webform join-the-team block-odd">
      <h2 class="block-title">Join the Team</h2>
      <div class="content">
        <div>
          <div class="form-item webform-component webform-component-markup" id="webform-component-sub-header">
              <p>Let us contact you with more information</p>
          </div>
          <script type="text/javascript" src="http://form.jotform.me/jsform/41884289305463"></script>
        </div>
      </div><!-- /.content -->
    </section><!-- /.block -->
    <section id="block-general-tikal-map-home-page" class="block block-general-tikal block-even">
      <h2 class="block-title">Find us at:</h2>

      <div class="content">

        <div id="map_canvas_footer" style="width: 240px; height: 200px;"></div>
        <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
        <script type="text/javascript">
            var latlng = new google.maps.LatLng(32.1065469,34.83523969999999);
            var settings = {
            zoom: 15,
                  center: latlng,
                  mapTypeControl: false,
                  mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU},
                  navigationControlOptions: {style: google.maps.NavigationControlStyle.SMALL},
                  mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            var map = new google.maps.Map(document.getElementById("map_canvas_footer"), settings);      
            var companyImage = new google.maps.MarkerImage("/assets/icons/logo-map-1a2609d2dd636172949b30cd33a1d8a0.png",
                new google.maps.Size(100,50),
                new google.maps.Point(0,0),
                new google.maps.Point(50,50)
            );
            var companyShadow = new google.maps.MarkerImage("images/logo_shadow.png",
                new google.maps.Size(130,50),
                new google.maps.Point(0,0),
                new google.maps.Point(65, 50)
            );
            var companyPos = new google.maps.LatLng(32.1065469,34.83523969999999);
            var companyMarker = new google.maps.Marker({
              position: companyPos,
              map: map,
              icon: companyImage,
              shadow: companyShadow,
              title:"",
              zIndex: 3}
            );
        </script>  
      </div><!-- /.content -->
    </section><!-- /.block -->
    <div id="block-block-3" class="block block-block find-us-at block-odd">
      <div class="content">
        <div class="address">
          Habarzel 4 st, 1st Floor&nbsp;<br>
          Tel Aviv 69710<br>
          Israel
        </div>  
      </div><!-- /.content -->
    </div><!-- /.block -->
  </div>
</footer>

        <footer id="footer-second" role="contentinfo">
  <div class="region region-footer-second">
    <section id="block-views-popular-articles-block" class="block block-views block-even">
      <h2 class="block-title">Popular Articles</h2>

      <div class="content">
        <div class="view view-popular-articles view-id-popular_articles view-display-id-block view-dom-id-796319b1b70c397287cdccd16eebbb82">

          <div class="view-content">
            <div class="view-content-limit">
              <div class="view-content-limit-content">
                <div class="views-row views-row-1 views-row-odd views-row-first">

                  <div class="views-field views-field-title">        <span class="field-content"><a href="/java/location-auto-complete-and-lookup">Location Auto complete and lookup</a></span>  </div>  </div>
                <div class="views-row views-row-2 views-row-even">

                  <div class="views-field views-field-title">        <span class="field-content"><a href="/js/present-and-future-typescript">Present and future of TypeScript</a></span>  </div>  </div>
                <div class="views-row views-row-3 views-row-odd views-row-last">

                  <div class="views-field views-field-title">        <span class="field-content"><a href="/ror/building-gogobot-social-graph">building the gogobot social graph</a></span>  </div>  </div>
              </div>
            </div>
          </div>

      </div>  </div><!-- /.content -->
    </section><!-- /.block -->
    <section id="block-menu-menu-fields" class="block block-menu block-odd">
      <h2 class="block-title">Domains</h2>

      <div class="content">
        <ul class="menu clearfix"><li class="first leaf application lifecycle management"><a href="/alm" title="">DevOps</a></li>
          <li class="leaf java"><a href="/java" title="">Java</a></li>
          <li class="leaf javascript"><a href="/js" title="">JavaScript</a></li>
          <li class="leaf .net"><a href="/net" title="">Android</a></li>
          <li class="last leaf ruby on rails"><a href="/ror" title="">Ruby</a></li>
      </ul>  </div><!-- /.content -->
    </section><!-- /.block -->
    <section id="block-menu-menu-site-map" class="block block-menu block-even">
      <h2 class="block-title">Site Map</h2>

      <div class="content">
        <ul class="menu clearfix"><li class="first leaf about us"><a href="/about" title="">About Us</a></li>
          <li class="leaf active-trail solutions"><a href="/solutions" title="" class="active-trail active">Solutions</a></li>
          <li class="leaf careers"><a href="/careers" title="">Careers</a></li>
          <li class="leaf events"><a href="/events" title="">Events</a></li>
          <li class="last leaf contact"><a href="/contact" title="">Contact</a></li>
      </ul>  </div><!-- /.content -->
    </section><!-- /.block -->
    <div id="block-block-1" class="block block-block all-rights-reserved block-odd">

      <div class="content">
        <p>© 2013 All Rights Reserved. Tikal</p>
      </div><!-- /.content -->
    </div><!-- /.block -->
    <div id="block-menu-menu-external-links" class="block block-menu block-even">

      <div class="content">
        <ul class="menu clearfix"><li class="first leaf facebook"><a href="http://www.facebook.com/TikalKnowledge" title="" target="_blank">Facebook</a></li>
          <li class="leaf twitter"><a href="https://twitter.com/TikalK" title="" target="_blank">Twitter</a></li>
          <li class="leaf in"><a href="http://www.linkedin.com/company/tikal-knowledge" title="" target="_blank">in</a></li>
          <li class="last leaf rss"><a href="/rss-latest-articles" title="Latest Articles">RSS</a></li>
      </ul>  </div><!-- /.content -->
    </div><!-- /.block -->
  </div>
</footer>

    </body>
</html>
