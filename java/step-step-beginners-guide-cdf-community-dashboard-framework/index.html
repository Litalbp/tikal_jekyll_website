<!DOCTYPE html>
<html>
    <head>
      <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>Step by Step Beginners Guide to CDF (Community Dashboard Framework)</title>
<meta name="viewport" content="width=device-width">
<link rel="shortcut icon" href="favicon.ico" type="image/vnd.microsoft.icon" />
<!-- syntax highlighting CSS -->
<!--link rel="stylesheet" href="/css/syntax.css"-->

<!-- Custom CSS -->
<link rel="stylesheet" href="/assets/application-1070e5396a9f348b2c31565a8ca2ade6.css">

<!-- Custom JS -->
<script src="/assets/vendor/jquery-2.1.1-fbf0c31ef61d80bbbc98a9cdfc7e6632.js"></script>
<script src="/assets/vendor/jquery.validate-466ee815d7a2fb9b74b895b6a0f9551c.js"></script>
<script src="/assets/vendor/scrollup/jquery.scrollUp-d730604bacd24a59da00d38b42cd77af.js"></script>
<script src="/assets/vendor/drupal_legacy-d5580e3eaf6de5a1446255d180dc73d3.js"></script>
<script src="/assets/vendor/angular.min-dfd2efe0eaac3581c5faf5cfed3b159e.js"></script>
<script src="/assets/meetup_events-5782f731b79266fd93b159cb798cc3d5.js"></script>
<script src="/assets/contact-897905f16738b8c5c1688eefae319441.js"></script>
<script src="/assets/application-07f972327fcb4602f91f1e8ba4b78498.js"></script>

<!-- ShareThis JS for posts section -->
<script type="text/javascript" src="http://w.sharethis.com/button/buttons.js"></script>
<script type="text/javascript">stLight.options({publisher: "6ae64a50-63a5-4021-a8de-b0adce0ce99b", doNotHash: false, doNotCopy: false, hashAddressBar: false});</script>

    </head>

    <body class="one-sidebar sidebar-second section-java page-node node-type-article all-pages with-navigation with-subnav featured dir-ltr">
        <div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&appId=519865898033052&version=v2.0";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
        <div id="header-first">
  <div class="region region-header-first">
    <div id="block-search-form" class="block block-search block-odd">

      <div class="content">
        <form id="search-block-form" accept-charset="UTF-8"><div><div class="container-inline">
              <h2 class="element-invisible">Search form</h2>
              <div class="form-item form-type-textfield form-item-search-block-form">
                <label class="element-invisible" for="edit-search-block-form--2">Search </label>
                <input title="Enter the terms you wish to search for." placeholder="Search" type="search" id="edit-search-block-form--2" name="search_block_form" value="" size="15" maxlength="128" class="form-text">
              </div>
              <div class="form-actions form-wrapper" id="edit-actions"><input type="submit" id="edit-submit" name="op" value="Search" class="form-submit"></div><input type="hidden" name="form_build_id" value="form-hCEJ23kB0sHlr4dB3Yv5-2cDcH10yNwGSUn69WjCjF4">
              <input type="hidden" name="form_id" value="search_block_form">
            </div>
      </div></form>  </div><!-- /.content -->
    </div><!-- /.block -->
    <div id="block-menu-menu-top-links" class="block block-menu block-even">

      <div class="content">
        <ul class="menu clearfix"><li class="first last leaf login"><a href="/user" title="">login</a></li>
      </ul>  </div><!-- /.content -->
    </div><!-- /.block -->
    <div id="block-menu-menu-language" class="block block-menu block-odd">
      
      <div class="content">
        <ul class="menu clearfix"><li class="first last leaf עברית"><a href="/hebrew" title="">עברית</a></li>
      </ul>  </div><!-- /.content -->
    </div><!-- /.block -->
  </div>
</div>
<div id="google-search-form" style="visibility:hidden; width: 1px; height: 1px; float:right;">
  <script>

    (function() {
        var cx = '012617499894110201007:qu0yvmmzksu';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = false;
        gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
                '//www.google.com/cse/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
    })();
</script>
<gcse:searchresults-only linkTarget="_self"></gcse:searchresults-only>


<script>
    $(document).ready(function() {
        $('#search-block-form').submit(function (e) {
            e.preventDefault();

            //find google search form
            var form = $('.gsc-control-wrapper-cse').find('form');
            var input = form.find("input[name='search']");
            var btn = form.find("input[type='image']");
            var tikalSearch = $('#edit-search-block-form--2');
            tikalSearch.blur();
            $("#bg").show();
            input.val(tikalSearch.val());
            //form.submit();
            btn.click();

        });
        
    });


</script>

</div>

        <header id="header" role="banner">
  <div class="logo-and-region-header">
    <div class="background-logo"></div>
    <a href="/" title="Home" rel="home" id="logo">
      <img src="/assets/logo-ebc269c722e9e1e11b3252c442c75750.png" alt="Home">
    </a>


    <div class="region region-header">
      <section id="block-menu-menu-header-menu" class="block block-menu block-even">
        <h2 class="block-title element-invisible">Header menu</h2>

        <div class="content">
          <ul class="menu clearfix">
            
              
              <li class="leaf"><a href="/about" class="">About</a></li>
            
              
              <li class="leaf"><a href="/solutions" class="">Solutions</a></li>
            
              
              <li class="leaf"><a href="/careers" class="">Careers</a></li>
            
              
              <li class="leaf"><a href="/events" class="">Events</a></li>
            
              
              <li class="leaf"><a href="/contact" class="">Contact</a></li>
            
        </ul>  </div><!-- /.content -->
      </section><!-- /.block -->
      <section id="block-menu-menu-domains" class="block block-menu block-odd">
        <h2 class="block-title element-invisible">Domains</h2>

        <div class="content">
          <ul class="menu clearfix"><li class="first leaf devops"><a href="/devops" title="">DevOps</a></li>
            <li class="leaf java"><a href="/java" title="">JAVA</a></li>
            <li class="leaf js"><a href="/js" title="">JS</a></li>
            <li class="leaf android"><a href="/android" title="">Android</a></li>
            <li class="last leaf ruby"><a href="/ruby" title="">Ruby</a></li>
        </ul>  </div><!-- /.content -->
      </section><!-- /.block -->
    </div>
  </div><!-- /#logo-and-region-header -->
</header>

        <div class="featured-background">
  <div id="featured">
    <div class="region-title-and-featured">
      <h1 class="title" id="page-title">Step by Step Beginners Guide to CDF (Community Dashboard Framework)</h1>
      <div class="region region-featured">
        <div id="block-views-author-block" class="block block-views">
          <div class="content">
            <div class="view view-author view-id-author view-display-id-block">
  <div class="view-content">
    <div class="view-content-limit">
      <div class="view-content-limit-content">
        <div class="views-row">
          <div class="views-field views-field-picture">
            <div class="field-content">
              
                <img src="/assets/pictures/profile-default-ab65955ebe8cf05005dc2e1ae497d862.jpg" width="307" height="230" alt="">
              
            </div>  
          </div>
          <div class="views-field views-field-field-first-name">
            <div class="field-content"></div>
          </div>
          <div class="views-field views-field-field-last-name">
            <div class="field-content"></div>
          </div>
          <div class="views-field views-field-field-description">
            <div class="field-content"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

          </div>
        </div>
      </div>
    </div>
  </div>
</div>

        <div class="shadow-page"></div>
        <div id="page">
          <div id="main">
            <div class="region region-content">
              <div id="block-system-main" class="block block-system">
                <div class="content">
                  <article class="node node-article published with-comments node-full">
                    <header>
  <div class="by-and-tags">
    <div class="by">
      <div class="label-by">by</div>
      <div class="name">
        
      </div>
    </div>
    <div class="tags">
      <div class="label-tags">tags:</div>
      <div class="float-tags">
        <div class="field field-name-field-tags field-type-taxonomy-term-reference field-label-hidden clearfix">
          <ul class="links">
            
              <li>
                <a href="/tags/JAVA">JAVA</a>
              </li>
            
              <li>
                <a href="/tags/Toturial">Toturial</a>
              </li>
            
              <li>
                <a href="/tags/Pentaho">Pentaho</a>
              </li>
            
              <li>
                <a href="/tags/guide">guide</a>
              </li>
            
              <li>
                <a href="/tags/Dashbaord">Dashbaord</a>
              </li>
            
              <li>
                <a href="/tags/CDF">CDF</a>
              </li>
            
              <li>
                <a href="/tags/OSBI">OSBI</a>
              </li>
            
          </ul>
        </div>
      </div>
    </div>
  </div>
  <time pubdate="" datetime="2010-10-16 00:00:00 +0200">
        <div class="day">16</div>
        Oct. 2010
      </time>
  
  
  


<span class="share-buttons">
  <span st_url='http://tikalk.com/java/step-step-beginners-guide-cdf-community-dashboard-framework' st_title='Step by Step Beginners Guide to CDF (Community Dashboard Framework)' class='st_facebook_hcount' displayText='Facebook'></span>
  <span st_url='http://tikalk.com/java/step-step-beginners-guide-cdf-community-dashboard-framework' st_title='Step by Step Beginners Guide to CDF (Community Dashboard Framework)' class='st_linkedin_hcount' displayText='LinkedIn'></span>
  <span st_url='http://tikalk.com/java/step-step-beginners-guide-cdf-community-dashboard-framework' st_title='Step by Step Beginners Guide to CDF (Community Dashboard Framework)' class='st_twitter_hcount' displayText='Tweet'></span>
  <span st_url='http://tikalk.com/java/step-step-beginners-guide-cdf-community-dashboard-framework' st_title='Step by Step Beginners Guide to CDF (Community Dashboard Framework)' class='st_fblike_hcount' displayText='Facebook Like'></span>
  <span st_url='http://tikalk.com/java/step-step-beginners-guide-cdf-community-dashboard-framework' st_title='Step by Step Beginners Guide to CDF (Community Dashboard Framework)' class='st_plusone_hcount' displayText='Google +1'></span>
</span>
</header>

                    <p>Dashboards used to be the hottest buzzword among BI enthusiasts such as myself, a Dashboard is like a mini application which gives managers a bird's-eye view of data for the purpose of decision making.</p>

<p style="margin-bottom: 0in;">&nbsp;</p>

<!--break-->

<p style="margin-bottom: 0in;"><a href="http://en.wikipedia.org/wiki/Dashboards_%28management_information_systems%29">Wikipedia</a> adds that:</p>

<p style="margin-bottom: 0in;">&ldquo;Like a car's dashboard (or control panel), a software dashboard provides decision makers with the input necessary to &quot;drive&quot; the business. Thus, a graphical user interface may be designed to display summaries, graphics (e.g., bar charts, pie charts, bullet graphs, &quot;sparklines,&quot; etc.), and gauges (with colors similar to traffic lights) in a portal-like framework to highlight important information.&rdquo;</p>

<p style="margin-bottom: 0in;">&nbsp;</p>

<p style="margin-bottom: 0in;">In this post we will learn how easy it is to create a Dashboard such as this one:</p>

<p style="margin-bottom: 0in;">&nbsp;</p>

<p style="margin-bottom: 0in;"><img width="600" height="324" border="1" src="/files/dash3.png" alt="" />&nbsp;</p>

<p style="margin-bottom: 0in;">The Dashboard will allow the user to search for a companies. Companies are arranged in a 3-level hierarchy, and the Dashboard will allow users to navigate down the hierarchy, so if the user clicks a company in one level, the levels below it will show it's subsidiaries and the levels above it will show its parent companies. When ever a company is selected (in any of the levels) the graphs on the bottom display additional data for the company.</p>

<p style="margin-bottom: 0in;">&nbsp;</p>

<p style="margin-bottom: 0in;">To accomplish the task, we are going to use Pentaho BI Server and <a href="http://code.google.com/p/pentaho-cdf/">CDF</a>, which is an open source dashboard framework developed by Pedro Alves from WebDetails.</p>

<p style="margin-bottom: 0in;">&nbsp;</p>

<p style="margin-bottom: 0in;">So first thing first, we have to set up our infrastructure, the good news is that CDF is now an integral part of Pentaho CE, so we just need to download and install Pentaho 3.6:</p>

<pre title="code" class="brush: xhtml;">
$ wget http: //sourceforge.net/projects/pentaho/files/Business%20Intelligence%20Server/3.6.0-stable/biserver-ce-3.6.0-stable.tar.gz/download
$ tar xzvf biserver-ce-3.6.0-stable.tar.gz
$ cd biserver-ce
$ ./start-pentaho.sh
</pre>

<p>&nbsp;</p>

<p>Great, you can see that it is working by navigating to port 8080 on the localhost. You can log-in using the default user and password (joe/password), there are many samples, including CDF samples and also CDF documentation is available through the system.</p>

<p style="margin-bottom: 0in;">&nbsp;</p>

<p style="margin-bottom: 0in;">I am going to publish the system on the web so I have to edit tomcat/conf/server.xml and to change the Connector port from 8080 to just 80, and also to edit tomcat/webapps/pentaho/WEB-INF/web.xml and modify the base-url parameter to the url I am going to use.</p>

<p style="margin-bottom: 0in;">&nbsp;</p>

<p style="margin-bottom: 0in;">Next step is to create a datasource to the database, this can be done using the administrator colsole, but for me it is easier to just  editing tomcat/webapps/pentaho/META-INF/context.xml and add this:</p>

<pre title="code" class="brush: xhtml;">
&lt;Resource name=&quot;jdbc/datasource&quot; auth=&quot;Container&quot; type=&quot;javax.sql.DataSource&quot;
factory=&quot;org.apache.commons.dbcp.BasicDataSourceFactory&quot; maxActive=&quot;20&quot; maxIdle=&quot;5&quot;
maxWait=&quot;10000&quot; username=&quot;biserver&quot; password=&quot;nottelling&quot;
driverClassName=&quot;com.mysql.jdbc.Driver&quot; url=&quot;jdbc:mysql://localhost:3306/dw&quot;/&gt;
</pre>

<p>&nbsp;</p>

<p style="margin-bottom: 0in;">At this point don't forget to restart the server.</p>

<p style="margin-bottom: 0in;">&nbsp;</p>

<p style="margin-bottom: 0in;">OK, next step is to create a solution and a dashboard, the easiest way is copy-paste from the examples.</p>

<pre title="code" class="brush: jscript;">
$ cd pentaho-solutions
$ cp -r cdf-samples/20-samples/charts mySolution
$ cd mySolution</pre>
<p style="margin-bottom: 0in;">&nbsp;</p>
<p style="margin-bottom: 0in;">The solution is defined by the index.xml file and we can edit the index.properties file to give it a name and a description. The Dashboard is defined by the .xcdf file which we should also rename and edit to our own names.</p>
<p style="margin-bottom: 0in;">&nbsp;</p>
<p style="margin-bottom: 0in;">Now you can go back to the web-browser, in order to see the new solution and new Dashboard you have to &ldquo;refresh the repository cache&rdquo; (there's a menu option for that and also a refresh icon) and Voil&agrave; &ndash; a new Dashboard was born.</p>
<p style="margin-bottom: 0in;">&nbsp;</p>
<p style="margin-bottom: 0in;">The content of the dashboard is stored in a template.html file, there are several parts to it which I would explain herein.</p>
<p style="margin-bottom: 0in;">&nbsp;</p>
<p style="margin-bottom: 0in;">First there is the html template itself which defines the structure of the Dashboard. In my case I needed a search box, 3 multi-select-boxes, two bar-charts and one gauge which I am going to layout as follows:</p>
<pre title="code" class="brush: xhtml;">
&lt;table align=&quot;center&quot; style=&quot;border: 0px solid&gt;
&lt;tr&gt;
&lt;td valign=&quot;top&quot;&gt;Search:&lt;div id=&quot;search_object&quot;&gt;&lt;/div&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td valign=&quot;top&quot;&gt;A Level:&lt;/td&gt;
&lt;td valign=&quot;top&quot;&gt;B Level:&lt;/td&gt;
&lt;td valign=&quot;top&quot;&gt;C Level:&lt;/div&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td valign=&quot;top&quot;&gt;&lt;div id=&quot;a_object&quot;&gt;&lt;/div&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot;&gt;&lt;div id=&quot;b_object&quot;&gt;&lt;/div&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot;&gt;&lt;div id=&quot;c_object&quot;&gt;&lt;/div&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td valign=&quot;top&quot;&gt;&lt;div id=&quot;channel_object&quot;&gt;&lt;/div&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot;&gt;&lt;div id=&quot;dialChart_object&quot;&gt;&lt;/div&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot;&gt;&lt;div id=&quot;product_object&quot;&gt;&lt;/div&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;</pre>
<p>&nbsp;</p>
<p style="margin-bottom: 0in;">The next step is to create the different components using CDF, the search box is declared using javascript:</p>
<pre title="code" class="brush: java;">
var query;
var searchComponent =
{
name: &quot;searchComponent&quot;,
type: &quot;textInputComponent&quot;,
htmlObject: &quot;search_object&quot;,
executeAtStart: true,
parameter: &quot;query&quot;,
tooltip: &quot;enter partial company name and press Enter&quot;,
postChange: function(){ searchFunction(query); }
}</pre>
<p>&nbsp;</p>
<p style="margin-bottom: 0in;">&nbsp;</p>
<p style="margin-bottom: 0in;">The htmlObject property is very important, it tells CDF where in the html template the component is going to reside.</p>
<p style="margin-bottom: 0in;">&nbsp;</p>
<p style="margin-bottom: 0in;">The postChange trigger function is going to be called when the users enters a new search query, and would be described in more details later.</p>
<p style="margin-bottom: 0in;">&nbsp;</p>
<p style="margin-bottom: 0in;">Each of the 3 multi-select-boxes is declared in a similar way:</p>
<pre title="code" class="brush: jscript;">
var a;
var aComponent =
{
name: &quot;aComponent&quot;,
type: &quot;selectMultiComponent&quot;,
parameters:[],
parameter:&quot;a&quot;,
size: &quot;10&quot;,
valueAsId: false,
htmlObject: &quot;a_object&quot;,
executeAtStart: true,
queryDefinition: aQueryDefinition,
listeners: [&quot;event&quot;],
postChange: function(){aFunction(a);}
}; </pre>
<p style="margin-bottom: 0in;">&nbsp;</p>
<p style="margin-bottom: 0in;">The queryDefinition object, as you must have already gueesed, is responsible for querying the data that is going to populate the component, it will be described in more details below.</p>
<p style="margin-bottom: 0in;">&nbsp;</p>
<p style="margin-bottom: 0in;">Bar-charts are created using this code:</p>
<pre title="code" class="brush: jscript;">
var channelComponent =
{
name: &quot;channelComponent&quot;,
type: &quot;jFreeChartComponent&quot;,
listeners:[&quot;selectedRegionMeasure&quot;],
chartDefinition: channelDefinition,
htmlObject: &quot;channel_object&quot;,
executeAtStart: true,
listeners: [&quot;event&quot;]
}
</pre>

<p>&nbsp;</p>

<p style="margin-bottom: 0in;">The listeners property lists event names to which this component listens, when ever such event is fired the component will refresh it's data.</p>

<p style="margin-bottom: 0in;">&nbsp;</p>

<p style="margin-bottom: 0in;">Finally the code for a gauge component:</p>

<pre title="code" class="brush: java;">
var overallComponent =
{
name: &quot;overallComponent&quot;,
type: &quot;dialComponent&quot;,
listeners:[&quot;departmentMeasure&quot;],
chartDefinition: dialChartDefinition,
htmlObject: &quot;dialChart_object&quot;,
executeAtStart: true,
listeners: [&quot;event&quot;]
}
</pre>

<p>&nbsp;</p>

<p style="margin-bottom: 0in;">Now that all the components are ready we can go ahead and initiate the Dashboard with this call:</p>

<pre title="code" class="brush: jscript;">
Dashboards.init([searchComponent,aComponent,bComponent,cComponent,overallComponent,channelComponent,productComponent]);
</pre>

<p>&nbsp;</p>

<p style="margin-bottom: 0in;">CDF includes many components such as Buttons, Combo-boxes, Menus, Tables, Maps, FlashCharts, Pivot views, Traffic lights and more... check out the online documentation for the full list, descriptions and samples.</p>

<p style="margin-bottom: 0in;">&nbsp;</p>

<p style="margin-bottom: 0in;">The next thing we want to define is the behavior of the Dashboard, in my case the state of the Dashboard is going to be managed using 4 variables and is going to use just one event to refresh all the views when the state changes:</p>

<pre title="code" class="brush: jscript;">
var queryStatus;
var aStatus;
var bStatus;
var cStatus;
</pre>

<p style="margin-bottom: 0in;">&nbsp;</p>

<p style="margin-bottom: 0in;">Now we can go back and look at the postChange function of the search component, which stores the query and resets any previous state. The call to fireChanges is will dispatch the event through all our views causing it to change.</p>

<pre title="code" class="brush: jscript;">
function searchFunction(val) {
queryStatus = val;
aStatus = &quot;&quot;;
bStatus = &quot;&quot;;
cStatus = &quot;&quot;;
Dashboards.fireChange(&quot;event&quot;,queryStatus);
}</pre>
<p style="margin-bottom: 0in;">&nbsp;</p>
<p style="margin-bottom: 0in;">And for each of the multi-select components, the code is just as simple:</p>
<pre title="code" class="brush: java;">
function aFunction(val) {
queryStatus = &quot;&quot;;
aStatus = val;
bStatus = &quot;&quot;;
cStatus = &quot;&quot;;
Dashboards.fireChange(&quot;event&quot;,queryStatus);
}
</pre>

<p>&nbsp;</p>

<p style="margin-bottom: 0in;">Now we are approaching the last part of the development, which is to define the data queries in either SQL or MDX. The query is constructed based on the state of the dashboard.</p>

<p style="margin-bottom: 0in;">&nbsp;</p>

<p style="margin-bottom: 0in;">The queryDefinition object for the multi-selects is:</p>

<pre title="code" class="brush: java;">
var aQueryDefinition = {
queryType: 'sql',
jndi: &quot;datasource&quot;,
query: function(){
var q= &quot;SELECT distinct A_ID, A_NAME &quot; +
&quot;FROM company &quot; +
&quot;WHERE 1=1 &quot; +
(queryStatus==&quot;&quot;?&quot;&quot;:(&quot;AND A_NAME like '%&quot;+queryStatus+&quot;%' &quot;)) +
(aStatus==&quot;&quot;?&quot;&quot;:(&quot;AND A_ID=&quot;+aStatus+&quot; &quot;)) +
(bStatus==&quot;&quot;?&quot;&quot;:(&quot;AND B_ID=&quot;+bStatus+&quot; &quot;)) +
(cStatus==&quot;&quot;?&quot;&quot;:(&quot;AND C_ID=&quot;+cStatus+&quot; &quot;)) +
&quot;LIMIT 100&quot;;
return q;
}
}</pre>
<p style="margin-bottom: 0in;">&nbsp;</p>
<p style="margin-bottom: 0in;">As you can see, we are using an SQL query to the datasource to pull a list of all the A level companies that match to the criteria that is defined by the status of the Dashboard, so if the status is a query we will pick only companies whose names contains the search query and if the status is a company we will pick only companies on that branch of the hierarchy.</p>
<p style="margin-bottom: 0in;">&nbsp;</p>
<p style="margin-bottom: 0in;">Similarly, the queryDefinition of the bar-charts is:</p>
<pre title="code" class="brush: jscript;">
var channelDefinition = {
width: 300,
height: 250,
chartType: &quot;BarChart&quot;,
datasetType: &quot;CategoryDataset&quot;,
is3d: &quot;false&quot;,
isStacked: &quot;true&quot;,
includeLegend: &quot;false&quot;,
foregroundAlpha: 0.7,
queryType: 'sql',
jndi: &quot;datasource&quot;,
title: &quot;Channel Revenues:&quot;,
query: function(){
var query = &quot;SELECT name, sum(Revenue) &quot; +
&quot;FROM company LEFT JOIN revenue ON company.id=COMPANY_SEQ LEFT JOIN channel ON CHANNEL_SEQ=channel.id &quot; +
&quot;WHERE &quot; +
(aStatus==&quot;&quot;&amp;&amp;bStatus==&quot;&quot;&amp;&amp;cStatus==&quot;&quot;?&quot;1=0 &quot;:&quot;1=1 &quot;) +
(aStatus==&quot;&quot;?&quot;&quot;:(&quot;AND A_ID=&quot;+aStatus+&quot; &quot;)) +
(bStatus==&quot;&quot;?&quot;&quot;:(&quot;AND B_ID=&quot;+bStatus+&quot; &quot;)) +
(cStatus==&quot;&quot;?&quot;&quot;:(&quot;AND C_ID=&quot;+cStatus+&quot; &quot;)) +
&quot;GROUP BY id ORDER BY sum(Revenue) DESC LIMIT 10&quot;;
//query = &quot;SELECT 'London',100&quot;;
return query;
}
}</pre>
<p>&nbsp;</p>
<p style="margin-bottom: 0in;">This query will return the total revenues by channel of all the companies that are on the branch of the selected company, if no company is selected the query will return no results.</p>
<p style="margin-bottom: 0in;">&nbsp;</p>
<p style="margin-bottom: 0in;">The gauge query will select the average value over all the companies in the branch.</p>
<pre title="code" class="brush: jscript;">
var dialChartDefinition = {
width: 300,
height: 200,
chartType: &quot;DialChart&quot;,
queryType: 'sql',
is3d: 'true',
jndi: &quot;datasource&quot;,
title: &quot;Overall&quot;,
intervals: [40,60,100],
includeLegend: true,
query: function(){
var query = &quot; SELECT avg(ovrall) FROM overall LEFT JOIN company ON COMPANY_SEQ=id &quot;+
&quot; WHERE &quot; +
(aStatus==&quot;&quot;&amp;&amp;bStatus==&quot;&quot;&amp;&amp;cStatus==&quot;&quot;?&quot;1=0&quot;:&quot;1=1&quot;) +
(aStatus==&quot;&quot;?&quot;&quot;:(&quot;AND A_ID=&quot;+aStatus+&quot; &quot;)) +
(bStatus==&quot;&quot;?&quot;&quot;:(&quot;AND B_ID=&quot;+bStatus+&quot; &quot;)) +
(cStatus==&quot;&quot;?&quot;&quot;:(&quot;AND C_ID=&quot;+cStatus+&quot; &quot;));
//query= &quot;SELECT 75&quot;;
return query;
}
}
</pre>

<p>&nbsp;</p>

<p style="margin-bottom: 0in;">That would be all. We have defined the Dashboard's view by suppling the html template and the components to populate it, the Dashboard's controller was defined using the components call back functions and the update event and the Dashboard's data model by defining the dynamic queries to the datasource. The Dashboard is ready to be used. Enjoy!</p>

<p>&nbsp;</p>

                    <div class="fb-comments" data-href="http://tikalk.com/java/step-step-beginners-guide-cdf-community-dashboard-framework" data-width="600px" data-numposts="5" data-colorscheme="light"></div>
                    <footer></footer>
                  </article>
                </div>
              </div>
            </div>
          </div>
        </div>
        <footer id="footer" role="contentinfo">
  <div class="region region-footer">
    <section id="block-block-2" class="block block-block block-about-tikal block-even">
      <h2 class="block-title">About Tikal</h2>

      <div class="content">
        <div>
          <div>
            For over 12 years, we have helped breakthrough companies achieve excellence and meet their goals.&nbsp;</div>
          <div>
            By doing so we've earned recognition for delivering extremely competitive and high-performance software services to clients worldwide.</div>
        </div>
        <div class="contact-title">
          Contact Information</div>
        <div class="contact-number">
          (972) 3 6488618</div>
        <div class="contact-mail">
          <a href="">info@tikalk.com</a></div>
      </div><!-- /.content -->
    </section><!-- /.block -->
    <section id="block-webform-client-block-22" class="block block-webform join-the-team block-odd">
      <h2 class="block-title">Join the Team</h2>
      <div class="content">
        <div>
          <div class="form-item webform-component webform-component-markup" id="webform-component-sub-header">
              <p>Let us contact you with more information</p>
          </div>
          <script type="text/javascript" src="http://form.jotform.me/jsform/41884289305463"></script>
        </div>
      </div><!-- /.content -->
    </section><!-- /.block -->
    <section id="block-general-tikal-map-home-page" class="block block-general-tikal block-even">
      <h2 class="block-title">Find us at:</h2>

      <div class="content">

        <div id="map_canvas_footer" style="width: 240px; height: 200px;"></div>
        <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
        <script type="text/javascript">
            var latlng = new google.maps.LatLng(32.1065469,34.83523969999999);
            var settings = {
            zoom: 15,
                  center: latlng,
                  mapTypeControl: false,
                  mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU},
                  navigationControlOptions: {style: google.maps.NavigationControlStyle.SMALL},
                  mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            var map = new google.maps.Map(document.getElementById("map_canvas_footer"), settings);      
            var companyImage = new google.maps.MarkerImage("/assets/icons/logo-map-1a2609d2dd636172949b30cd33a1d8a0.png",
                new google.maps.Size(100,50),
                new google.maps.Point(0,0),
                new google.maps.Point(50,50)
            );
            var companyShadow = new google.maps.MarkerImage("images/logo_shadow.png",
                new google.maps.Size(130,50),
                new google.maps.Point(0,0),
                new google.maps.Point(65, 50)
            );
            var companyPos = new google.maps.LatLng(32.1065469,34.83523969999999);
            var companyMarker = new google.maps.Marker({
              position: companyPos,
              map: map,
              icon: companyImage,
              shadow: companyShadow,
              title:"",
              zIndex: 3}
            );
        </script>  
      </div><!-- /.content -->
    </section><!-- /.block -->
    <div id="block-block-3" class="block block-block find-us-at block-odd">
      <div class="content">
        <div class="address">
          Habarzel 4 st, 1st Floor&nbsp;<br>
          Tel Aviv 69710<br>
          Israel
        </div>  
      </div><!-- /.content -->
    </div><!-- /.block -->
  </div>
</footer>

        <footer id="footer-second" role="contentinfo">
  <div class="region region-footer-second">
    <section id="block-views-popular-articles-block" class="block block-views block-even">
      <h2 class="block-title">Popular Articles</h2>

      <div class="content">
        <div class="view view-popular-articles view-id-popular_articles view-display-id-block view-dom-id-796319b1b70c397287cdccd16eebbb82">

          <div class="view-content">
            <div class="view-content-limit">
              <div class="view-content-limit-content">
                <div class="views-row views-row-1 views-row-odd views-row-first">

                  <div class="views-field views-field-title">        <span class="field-content"><a href="/java/location-auto-complete-and-lookup">Location Auto complete and lookup</a></span>  </div>  </div>
                <div class="views-row views-row-2 views-row-even">

                  <div class="views-field views-field-title">        <span class="field-content"><a href="/js/present-and-future-typescript">Present and future of TypeScript</a></span>  </div>  </div>
                <div class="views-row views-row-3 views-row-odd views-row-last">

                  <div class="views-field views-field-title">        <span class="field-content"><a href="/ror/building-gogobot-social-graph">building the gogobot social graph</a></span>  </div>  </div>
              </div>
            </div>
          </div>

      </div>  </div><!-- /.content -->
    </section><!-- /.block -->
    <section id="block-menu-menu-fields" class="block block-menu block-odd">
      <h2 class="block-title">Domains</h2>

      <div class="content">
        <ul class="menu clearfix"><li class="first leaf application lifecycle management"><a href="/alm" title="">DevOps</a></li>
          <li class="leaf java"><a href="/java" title="">Java</a></li>
          <li class="leaf javascript"><a href="/js" title="">JavaScript</a></li>
          <li class="leaf .net"><a href="/net" title="">Android</a></li>
          <li class="last leaf ruby on rails"><a href="/ror" title="">Ruby</a></li>
      </ul>  </div><!-- /.content -->
    </section><!-- /.block -->
    <section id="block-menu-menu-site-map" class="block block-menu block-even">
      <h2 class="block-title">Site Map</h2>

      <div class="content">
        <ul class="menu clearfix"><li class="first leaf about us"><a href="/about" title="">About Us</a></li>
          <li class="leaf active-trail solutions"><a href="/solutions" title="" class="active-trail active">Solutions</a></li>
          <li class="leaf careers"><a href="/careers" title="">Careers</a></li>
          <li class="leaf events"><a href="/events" title="">Events</a></li>
          <li class="last leaf contact"><a href="/contact" title="">Contact</a></li>
      </ul>  </div><!-- /.content -->
    </section><!-- /.block -->
    <div id="block-block-1" class="block block-block all-rights-reserved block-odd">

      <div class="content">
        <p>© 2013 All Rights Reserved. Tikal</p>
      </div><!-- /.content -->
    </div><!-- /.block -->
    <div id="block-menu-menu-external-links" class="block block-menu block-even">

      <div class="content">
        <ul class="menu clearfix"><li class="first leaf facebook"><a href="http://www.facebook.com/TikalKnowledge" title="" target="_blank">Facebook</a></li>
          <li class="leaf twitter"><a href="https://twitter.com/TikalK" title="" target="_blank">Twitter</a></li>
          <li class="leaf in"><a href="http://www.linkedin.com/company/tikal-knowledge" title="" target="_blank">in</a></li>
          <li class="last leaf rss"><a href="/rss-latest-articles" title="Latest Articles">RSS</a></li>
      </ul>  </div><!-- /.content -->
    </div><!-- /.block -->
  </div>
</footer>

    </body>
</html>
