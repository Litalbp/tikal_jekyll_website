<!DOCTYPE html>
<html>
    <head>
      <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>Managing Your DB Changes</title>
<meta name="viewport" content="width=device-width">
<link rel="shortcut icon" href="favicon.ico" type="image/vnd.microsoft.icon" />
<!-- syntax highlighting CSS -->
<!--link rel="stylesheet" href="/css/syntax.css"-->

<!-- Custom CSS -->
<link rel="stylesheet" href="/assets/application-1070e5396a9f348b2c31565a8ca2ade6.css">

<!-- Custom JS -->
<script src="/assets/vendor/jquery-2.1.1-fbf0c31ef61d80bbbc98a9cdfc7e6632.js"></script>
<script src="/assets/vendor/jquery.validate-466ee815d7a2fb9b74b895b6a0f9551c.js"></script>
<script src="/assets/vendor/scrollup/jquery.scrollUp-d730604bacd24a59da00d38b42cd77af.js"></script>
<script src="/assets/vendor/drupal_legacy-d5580e3eaf6de5a1446255d180dc73d3.js"></script>
<script src="/assets/vendor/angular.min-dfd2efe0eaac3581c5faf5cfed3b159e.js"></script>
<script src="/assets/meetup_events-5782f731b79266fd93b159cb798cc3d5.js"></script>
<script src="/assets/contact-897905f16738b8c5c1688eefae319441.js"></script>
<script src="/assets/application-07f972327fcb4602f91f1e8ba4b78498.js"></script>

<!-- ShareThis JS for posts section -->
<script type="text/javascript" src="http://w.sharethis.com/button/buttons.js"></script>
<script type="text/javascript">stLight.options({publisher: "6ae64a50-63a5-4021-a8de-b0adce0ce99b", doNotHash: false, doNotCopy: false, hashAddressBar: false});</script>

    </head>

    <body class="one-sidebar sidebar-second section-jsandroidjavarubydevops page-node node-type-article all-pages with-navigation with-subnav featured dir-ltr">
        <div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&appId=519865898033052&version=v2.0";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
        <div id="header-first">
  <div class="region region-header-first">
    <div id="block-search-form" class="block block-search block-odd">

      <div class="content">
        <form id="search-block-form" accept-charset="UTF-8"><div><div class="container-inline">
              <h2 class="element-invisible">Search form</h2>
              <div class="form-item form-type-textfield form-item-search-block-form">
                <label class="element-invisible" for="edit-search-block-form--2">Search </label>
                <input title="Enter the terms you wish to search for." placeholder="Search" type="search" id="edit-search-block-form--2" name="search_block_form" value="" size="15" maxlength="128" class="form-text">
              </div>
              <div class="form-actions form-wrapper" id="edit-actions"><input type="submit" id="edit-submit" name="op" value="Search" class="form-submit"></div><input type="hidden" name="form_build_id" value="form-hCEJ23kB0sHlr4dB3Yv5-2cDcH10yNwGSUn69WjCjF4">
              <input type="hidden" name="form_id" value="search_block_form">
            </div>
      </div></form>  </div><!-- /.content -->
    </div><!-- /.block -->
    <div id="block-menu-menu-top-links" class="block block-menu block-even">

      <div class="content">
        <ul class="menu clearfix"><li class="first last leaf login"><a href="/user" title="">login</a></li>
      </ul>  </div><!-- /.content -->
    </div><!-- /.block -->
    <div id="block-menu-menu-language" class="block block-menu block-odd">
      
      <div class="content">
        <ul class="menu clearfix"><li class="first last leaf עברית"><a href="/hebrew" title="">עברית</a></li>
      </ul>  </div><!-- /.content -->
    </div><!-- /.block -->
  </div>
</div>
<div id="google-search-form" style="visibility:hidden; width: 1px; height: 1px; float:right;">
  <script>

    (function() {
        var cx = '012617499894110201007:qu0yvmmzksu';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = false;
        gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
                '//www.google.com/cse/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
    })();
</script>
<gcse:searchresults-only linkTarget="_self"></gcse:searchresults-only>


<script>
    $(document).ready(function() {
        $('#search-block-form').submit(function (e) {
            e.preventDefault();

            //find google search form
            var form = $('.gsc-control-wrapper-cse').find('form');
            var input = form.find("input[name='search']");
            var btn = form.find("input[type='image']");
            var tikalSearch = $('#edit-search-block-form--2');
            tikalSearch.blur();
            $("#bg").show();
            input.val(tikalSearch.val());
            //form.submit();
            btn.click();

        });
        
    });


</script>

</div>

        <header id="header" role="banner">
  <div class="logo-and-region-header">
    <div class="background-logo"></div>
    <a href="/" title="Home" rel="home" id="logo">
      <img src="/assets/logo-ebc269c722e9e1e11b3252c442c75750.png" alt="Home">
    </a>


    <div class="region region-header">
      <section id="block-menu-menu-header-menu" class="block block-menu block-even">
        <h2 class="block-title element-invisible">Header menu</h2>

        <div class="content">
          <ul class="menu clearfix">
            
              
              <li class="leaf"><a href="/about" class="">About</a></li>
            
              
              <li class="leaf"><a href="/solutions" class="">Solutions</a></li>
            
              
              <li class="leaf"><a href="/careers" class="">Careers</a></li>
            
              
              <li class="leaf"><a href="/events" class="">Events</a></li>
            
              
              <li class="leaf"><a href="/contact" class="">Contact</a></li>
            
        </ul>  </div><!-- /.content -->
      </section><!-- /.block -->
      <section id="block-menu-menu-domains" class="block block-menu block-odd">
        <h2 class="block-title element-invisible">Domains</h2>

        <div class="content">
          <ul class="menu clearfix"><li class="first leaf devops"><a href="/devops" title="">DevOps</a></li>
            <li class="leaf java"><a href="/java" title="">JAVA</a></li>
            <li class="leaf js"><a href="/js" title="">JS</a></li>
            <li class="leaf android"><a href="/android" title="">Android</a></li>
            <li class="last leaf ruby"><a href="/ruby" title="">Ruby</a></li>
        </ul>  </div><!-- /.content -->
      </section><!-- /.block -->
    </div>
  </div><!-- /#logo-and-region-header -->
</header>

        <div class="featured-background">
  <div id="featured">
    <div class="region-title-and-featured">
      <h1 class="title" id="page-title">Managing Your DB Changes</h1>
      <div class="region region-featured">
        <div id="block-views-author-block" class="block block-views">
          <div class="content">
            <div class="view view-author view-id-author view-display-id-block">
  <div class="view-content">
    <div class="view-content-limit">
      <div class="view-content-limit-content">
        <div class="views-row">
          <div class="views-field views-field-picture">
            <div class="field-content">
              
                <img typeof="foaf:Image" src="/assets/pictures/picture-51-1361228853-03465e84095f1b341f59ad57fcb5e142.jpg" width="307" height="230" alt="">
              
            </div>  
          </div>
          <div class="views-field views-field-field-first-name">
            <div class="field-content">Yanai</div>
          </div>
          <div class="views-field views-field-field-last-name">
            <div class="field-content">Franchi</div>
          </div>
          <div class="views-field views-field-field-description">
            <div class="field-content">Java Architect</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

          </div>
        </div>
      </div>
    </div>
  </div>
</div>

        <div class="shadow-page"></div>
        <div id="page">
          <div id="main">
            <div class="region region-content">
              <div id="block-system-main" class="block block-system">
                <div class="content">
                  <article class="node node-article published with-comments node-full">
                    <header>
  <div class="by-and-tags">
    <div class="by">
      <div class="label-by">by</div>
      <div class="name">
        <a href='/java/yanai'>yanai</a>
      </div>
    </div>
    <div class="tags">
      <div class="label-tags">tags:</div>
      <div class="float-tags">
        <div class="field field-name-field-tags field-type-taxonomy-term-reference field-label-hidden clearfix">
          <ul class="links">
            
              <li>
                <a href="/tags/JAVA">JAVA</a>
              </li>
            
              <li>
                <a href="/tags/DB-Migration-Change-management">DB Migration Change management</a>
              </li>
            
          </ul>
        </div>
      </div>
    </div>
  </div>
  <time pubdate="" datetime="2011-11-06 00:00:00 +0200">
        <div class="day">06</div>
        Nov. 2011
      </time>
  
  
  


<span class="share-buttons">
  <span st_url='http://tikalk.com/managing-your-db-changes' st_title='Managing Your DB Changes' class='st_facebook_hcount' displayText='Facebook'></span>
  <span st_url='http://tikalk.com/managing-your-db-changes' st_title='Managing Your DB Changes' class='st_linkedin_hcount' displayText='LinkedIn'></span>
  <span st_url='http://tikalk.com/managing-your-db-changes' st_title='Managing Your DB Changes' class='st_twitter_hcount' displayText='Tweet'></span>
  <span st_url='http://tikalk.com/managing-your-db-changes' st_title='Managing Your DB Changes' class='st_fblike_hcount' displayText='Facebook Like'></span>
  <span st_url='http://tikalk.com/managing-your-db-changes' st_title='Managing Your DB Changes' class='st_plusone_hcount' displayText='Google +1'></span>
</span>
</header>

                    <p>It probably happened to you as well... You develop a product, and after you successfully install it at your customers sites, you end up with dozens of versions/revisions of your product. Each revision has its specific SW, with appropriate DB schema, filled with your product initial data (here again, different for each revision) and customer data. How do you manage this DB changes ? What happen when you have dozens of customers with dozens of deployment revisions ? How to support more than one DB ?</p>

<p>These are some of the questions I had to answer on one of Tikal existing customers projects I'm involved with. The questions above are just example for the issues you have to deal when it comes to DB change management.</p>

<p style="margin-bottom: 0cm; text-decoration: none; ">&nbsp;</p>

<h1><font color="#00000a"><font face="Times New Roman, serif"><font size="3"><span style="text-decoration: none">The Problem</span></font></font></font></h1>

<p style="margin-bottom: 0cm"><font color="#00000a"><font face="Times New Roman, serif"><font size="3"><span style="text-decoration: none">As said, the the product should be deployed, on dozens of customers sites, and in addition it will be deployed on various testing and sales persons environments.  By the time, different customers and testers will have different versions of the product. At some point, they may want or need to upgrade their existing product version to a newer revision. This upgrade process, should keep the existing data of the customer, while enabling the administrator to upgrade the product to the new revision. As part of this upgrade process, there is a need to upgrade the database schema (executing </span></font></font></font><font color="#0000ff"><font face="Arial, sans-serif"><font size="2"><span lang="zxx"><u><a class="western" href="http://en.wikipedia.org/wiki/Data_Definition_Language"><font face="Times New Roman, serif"><font size="3">DDL</font></font></a></u></span></font></font></font><font color="#00000a"><font face="Times New Roman, serif"><font size="3"><span style="text-decoration: none"> SQL statements) and the data stored within it (executing </span></font></font></font><font color="#0000ff"><font face="Arial, sans-serif"><font size="2"><span lang="zxx"><u><a class="western" href="http://en.wikipedia.org/wiki/Data_Manipulation_Language"><font face="Times New Roman, serif"><font size="3">DML</font></font></a></u></span></font></font></font><font color="#00000a"><font face="Times New Roman, serif"><font size="3"><span style="text-decoration: none"> SQL statements). We may even need to apply some Java code to manipulate existing data, for example in case we may need </span></font></font></font><font color="#0000ff"><font face="Arial, sans-serif"><font size="2"><span lang="zxx"><u><a class="western" href="http://en.wikipedia.org/wiki/Binary_large_object"><font face="Times New Roman, serif"><font size="3">BLOB</font></font></a></u></span></font></font></font><font color="#00000a"><font face="Times New Roman, serif"><font size="3"><span style="text-decoration: none"> migration. These updates depends of course on the customer/tester existing database schema and data. Nevertheless, when this upgrade process is been finished the database should have the appropriate schema and data according to the upgraded product revision. We also need to support failed resuming of failed migrations , due to some errors or network failure while the migration was running).</span></font></font></font></p>

<p style="margin-bottom: 0cm">&nbsp;</p>

<p style="margin-bottom: 0cm">&nbsp;</p>

<p><strong> </strong></p>

<h1><strong><font face="Times New Roman, serif"><font size="3"><font color="#00000a"><span style="text-decoration: none">DB Change Management Tools</span></font></font></font></strong></h1>

<p><strong> </strong></p>

<p>&nbsp;</p>

<p style="text-decoration: none; "><font color="#00000a"><font face="Times New Roman, serif"><font size="3">Rather than &ldquo;inventing the wheel&rdquo; as a solution for the problem, I chose to take one of the existing &ldquo;DB migrations tool&rdquo;, integrate it into the product, and adapt it to our needs. The tool should apply the DB migration on the product startup. This means that when the product will have finally been finished to load, the DB migration tool will have been finished successfully as well (in case of failure, the product will fail to load), keeping all the migration metadata in its own dedicated table/s.</font></font></font></p>

<p style="text-decoration: none; ">&nbsp;</p>

<h2 class="western" style="font-weight: normal; text-decoration: none">&nbsp;</h2>

<p><strong> </strong></p>

<h1><strong><font color="#00000a"><font face="Times New Roman, serif"><font size="3">Choosing The Right Tool</font></font></font></strong></h1>

<p><strong> </strong></p>

<p>&nbsp;</p>

<p><font color="#00000a"><font face="Times New Roman, serif"><font size="3"><span style="text-decoration: none">There are quite a few tools for DB migrations - </span></font></font></font><font color="#0000ff"><font face="Arial, sans-serif"><font size="2"><span lang="zxx"><u><a class="western" href="http://code.google.com/p/flyway/"><font face="Times New Roman, serif"><font size="3">Here is a link</font></font></a></u></span></font></font></font><font color="#00000a"><font face="Times New Roman, serif"><font size="3"><span style="text-decoration: none"> that compares their features. At the end f the day we ended with two choices: </span></font></font></font><font color="#0000ff"><font face="Arial, sans-serif"><font size="2"><span lang="zxx"><u><a class="western" href="http://www.liquibase.org/"><font face="Times New Roman, serif"><font size="3">Liquibase</font></font></a></u></span></font></font></font><font color="#00000a"><font face="Times New Roman, serif"><font size="3"><span style="text-decoration: none"> and </span></font></font></font><font color="#0000ff"><font face="Arial, sans-serif"><font size="2"><span lang="zxx"><u><a class="western" href="http://code.google.com/p/flyway/"><font face="Times New Roman, serif"><font size="3">Flyway</font></font></a></u></span></font></font></font><font color="#00000a"><font face="Times New Roman, serif"><font size="3"><span style="text-decoration: none">. Liquibase is more general purpose in the sense that the migration statements are embedded general &ldquo;ChangeSet&rdquo; XML tags in XML files. Liquibase is responsible to translate the &ldquo;ChangeSet&rdquo; instructions in the XML files to DB specific SQL statements. Liquibase has yet another advantage - Each and every &ldquo;ChangeSet&rdquo; statement is been executed as a separate transaction, reflected  in a separated row in Liquibase metadata table, which can help in case the underlying DB does NOT support DDL transactions.</span></font></font></font></p>

<p><font color="#00000a"><font face="Times New Roman, serif"><font size="3"><span style="text-decoration: none">Nevertheless, I chose </span></font></font></font><font color="#00000a"><font face="Times New Roman, serif"><font size="3"><u>NOT</u></font></font></font><font color="#00000a"><font face="Times New Roman, serif"><font size="3"><span style="text-decoration: none"> to use Liquibase , and to take a new tool called <a class="western" href="http://code.google.com/p/flyway/">Flyway</a> instead. There were a few reasons for this decision: First, our chosen RDBMS is PostgreSQL, <a class="western" href="http://wiki.postgresql.org/wiki/Transactional_DDL_in_PostgreSQL:_A_Competitive_Analysis">which does support DDL transactions</a> - The whole file migration can be executed as one transaction (making this Liquibase advantage redundant here). Second, Liquibase does NOT support <a class="western" href="http://en.wikipedia.org/wiki/Binary_large_object">BLOB</a> migrations, or any advanced Java code migrations. We may need to migrate our existing BLOBS data and tables , and we may have complected code that will be easier to write with Java than SQL script. Third, we also have some of the data deployed in yet another NoSQL DB (<a class="western" href="http://www.mongodb.org/">MongoDB</a>), and its data will probably have to be migrated as well as part of the upgrade, and it will be easier to use the same tool for that.</span></font></font></font></p>

<h2 class="western" style="font-weight: normal; text-decoration: none"><font color="#00000a"><font face="Times New Roman, serif"><font size="3">Technical Details</font></font></font></h2>

<p><font face="Times New Roman, serif"><font size="3"><font color="#00000a"><span style="text-decoration: none">As mentioned we chose to take Flyway as our migration tool. There is a special Spring bean in the configuration file, that is responsible to run the migration on Spring application startup (using Spring &ldquo;init-method&rdquo;), before initializing the Hibernate Session Factory, using &ldquo;depends&rdquo; keyword on the Hibernate Session Factory bean. This enables Hibernate's SessionFactory to connect </span></font><font color="#00000a"><u><b>after</b></u></font><font color="#00000a"><span style="text-decoration: none"> the migration had been applied, to the migrated DB, and &ldquo;validate&rdquo; the migrated schema against the current Hibernate configuration.</span></font></font></font></p>

<p><font color="#00000a"><font face="Times New Roman, serif"><font size="3"><span style="text-decoration: none">The easiest way to understand how flyway works, is to </span></font></font></font><font color="#0000ff"><font face="Arial, sans-serif"><font size="2"><span lang="zxx"><u><a class="western" href="http://code.google.com/p/flyway/wiki/HowDoesFlywayWork"><font face="Times New Roman, serif"><font size="3">read this page</font></font></a></u></span></font></font></font><font color="#00000a"><font face="Times New Roman, serif"><font size="3"><span style="text-decoration: none">. In our product I have a Maven project for the migrations, and a dedicated base directory to put all the migrations files. Each migration file will have the following file name convention:</span></font></font></font></p>

<p style="text-decoration: none; "><font color="#00000a"><font face="Times New Roman, serif"><font size="3">V&lt;VERSION&gt;_&lt;SEQ&gt;__&lt;Description&gt;.sql</font></font></font></p>

<p style="text-decoration: none; "><font color="#00000a"><font face="Times New Roman, serif"><font size="3">So for example the initial file can be as follow : </font></font></font></p>

<p style="text-decoration: none; "><font color="#00000a"><font face="Times New Roman, serif"><font size="3">V8.0.2.1_A__InitialVersion.sql</font></font></font></p>

<p><font color="#00000a"><font face="Times New Roman, serif"><font size="3">The file above is SQL migration file for the product in version 8.0.2.1 and have a sequence number &ldquo;A&rdquo;. Here are the details for the fields place holder:</font></font></font></p>

<p><font face="Times New Roman, serif"><font size="3"><font color="#00000a"><u><b>VERSION</b></u></font><font color="#00000a"><span style="text-decoration: none"> &ndash; this is the product version, following the internal version product's convention. It usually contains 4 octets with &ldquo;.&rdquo; as a separator between them.</span></font></font></font></p>

<p><font face="Times New Roman, serif"><font size="3"><font color="#00000a"><u><b>SEQ</b></u></font><font color="#00000a"><span style="text-decoration: none"> &ndash; The sequence number/letter this file will be executed on behalf of the product version migration. Thus, the file V8.0.2.1_A__Desc.sql will run just before  V8.0.2.1_B__Desc.sql file. However both files will run after running files from previous product versions &ndash; i.e file V8.0.2.0_B__Desc.sql will run before both files, since it belongs to a previous product version.</span></font></font></font></p>

<p style="text-decoration: none; "><font color="#00000a"><font face="Times New Roman, serif"><font size="3">In practice, Flyway will run all migrations files with higher versions than the existing DB state (reflected in Flyway table), according to the version and sequence number. In case of failure while the migration is running, Flyway will roll back all changes of the current migration file, and will mark this migration step as failed. This will enable resuming and running the migration again, that will start from the last failed point.</font></font></font></p>

<p style="text-decoration: none; ">&nbsp;</p>

<h1><font color="#00000a"><font face="Times New Roman, serif"><font size="3">DB Migration with Java</font></font></font></h1>

<p><font face="Times New Roman, serif"><font size="3"><font color="#00000a"><span style="text-decoration: none">As mentioned, Flyway also enables Java based migrations. All Java migration classes for the product have a dedicated package &ldquo;</span></font><font color="#000000"><span style="text-decoration: none">com.customername.productname.server.persistence.jpa.infra.flyway.postgresql</span></font><font color="#00000a"><span style="text-decoration: none">&rdquo;, and should be located in migration project. </span></font></font></font></p>

<p style="text-decoration: none; "><font color="#00000a"><font face="Times New Roman, serif"><font size="3">The execution of the migration Java files is been integrated with the versioning and sequence of the SQL files , explained in previous section: The naming convention for Java files is similar to the SQL files: </font></font></font></p>

<p style="text-decoration: none; "><font color="#00000a"><font face="Times New Roman, serif"><font size="3">V&lt;VERSION&gt;_&lt;SEQ&gt;__&lt;Description&gt;.java</font></font></font></p>

<p style="text-decoration: none; "><font color="#00000a"><font face="Times New Roman, serif"><font size="3">The only difference is, this time the VERRSION placeholder can NOT have &ldquo;.&rdquo; separator field between the octets (due to Java files naming), and instead will have &ldquo;_&rdquo; as the separator. So the Java file <font color="#000000">V8_0_2_1_B__InitialVersion</font>.java will run just after V8.0.2.1_A__InitialVersion.sql file execution. In case 2 migrations files (either Java or SQL file) will have an identical VERSION and the same sequence number, an in error will be omitted and the migration will NOT be applied.</font></font></font></p>

<p style="text-decoration: none; ">&nbsp;</p>

<h1><font color="#00000a"><font face="Times New Roman, serif"><font size="3">Summary</font></font></font></h1>

<p style="text-decoration: none; "><font color="#00000a"><font face="Times New Roman, serif"><font size="3">When it comes to DB migration , and DB change management, there are various tools, and its better to adapt one of them to your needs, rather than build your own solution here. These tools have different characteristics, and its better to check your exact needs and constraints before choosing the tool. You can even integrate the tool (at least some of them), as part of your application startup, so it will be easier and somewhat transparent migration.</font></font></font></p>

<p style="margin-bottom: 0cm">&nbsp;</p>

<p>&nbsp;</p>

                    <div class="fb-comments" data-href="http://tikalk.com/managing-your-db-changes" data-width="600px" data-numposts="5" data-colorscheme="light"></div>
                    <footer></footer>
                  </article>
                </div>
              </div>
            </div>
          </div>
        </div>
        <footer id="footer" role="contentinfo">
  <div class="region region-footer">
    <section id="block-block-2" class="block block-block block-about-tikal block-even">
      <h2 class="block-title">About Tikal</h2>

      <div class="content">
        <div>
          <div>
            For over 12 years, we have helped breakthrough companies achieve excellence and meet their goals.&nbsp;</div>
          <div>
            By doing so we've earned recognition for delivering extremely competitive and high-performance software services to clients worldwide.</div>
        </div>
        <div class="contact-title">
          Contact Information</div>
        <div class="contact-number">
          (972) 3 6488618</div>
        <div class="contact-mail">
          <a href="">info@tikalk.com</a></div>
      </div><!-- /.content -->
    </section><!-- /.block -->
    <section id="block-webform-client-block-22" class="block block-webform join-the-team block-odd">
      <h2 class="block-title">Join the Team</h2>
      <div class="content">
        <div>
          <div class="form-item webform-component webform-component-markup" id="webform-component-sub-header">
              <p>Let us contact you with more information</p>
          </div>
          <script type="text/javascript" src="http://form.jotform.me/jsform/41884289305463"></script>
        </div>
      </div><!-- /.content -->
    </section><!-- /.block -->
    <section id="block-general-tikal-map-home-page" class="block block-general-tikal block-even">
      <h2 class="block-title">Find us at:</h2>

      <div class="content">

        <div id="map_canvas_footer" style="width: 240px; height: 200px;"></div>
        <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
        <script type="text/javascript">
            var latlng = new google.maps.LatLng(32.1065469,34.83523969999999);
            var settings = {
            zoom: 15,
                  center: latlng,
                  mapTypeControl: false,
                  mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU},
                  navigationControlOptions: {style: google.maps.NavigationControlStyle.SMALL},
                  mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            var map = new google.maps.Map(document.getElementById("map_canvas_footer"), settings);      
            var companyImage = new google.maps.MarkerImage("/assets/icons/logo-map-1a2609d2dd636172949b30cd33a1d8a0.png",
                new google.maps.Size(100,50),
                new google.maps.Point(0,0),
                new google.maps.Point(50,50)
            );
            var companyShadow = new google.maps.MarkerImage("images/logo_shadow.png",
                new google.maps.Size(130,50),
                new google.maps.Point(0,0),
                new google.maps.Point(65, 50)
            );
            var companyPos = new google.maps.LatLng(32.1065469,34.83523969999999);
            var companyMarker = new google.maps.Marker({
              position: companyPos,
              map: map,
              icon: companyImage,
              shadow: companyShadow,
              title:"",
              zIndex: 3}
            );
        </script>  
      </div><!-- /.content -->
    </section><!-- /.block -->
    <div id="block-block-3" class="block block-block find-us-at block-odd">
      <div class="content">
        <div class="address">
          Habarzel 4 st, 1st Floor&nbsp;<br>
          Tel Aviv 69710<br>
          Israel
        </div>  
      </div><!-- /.content -->
    </div><!-- /.block -->
  </div>
</footer>

        <footer id="footer-second" role="contentinfo">
  <div class="region region-footer-second">
    <section id="block-views-popular-articles-block" class="block block-views block-even">
      <h2 class="block-title">Popular Articles</h2>

      <div class="content">
        <div class="view view-popular-articles view-id-popular_articles view-display-id-block view-dom-id-796319b1b70c397287cdccd16eebbb82">

          <div class="view-content">
            <div class="view-content-limit">
              <div class="view-content-limit-content">
                <div class="views-row views-row-1 views-row-odd views-row-first">

                  <div class="views-field views-field-title">        <span class="field-content"><a href="/java/location-auto-complete-and-lookup">Location Auto complete and lookup</a></span>  </div>  </div>
                <div class="views-row views-row-2 views-row-even">

                  <div class="views-field views-field-title">        <span class="field-content"><a href="/js/present-and-future-typescript">Present and future of TypeScript</a></span>  </div>  </div>
                <div class="views-row views-row-3 views-row-odd views-row-last">

                  <div class="views-field views-field-title">        <span class="field-content"><a href="/ror/building-gogobot-social-graph">building the gogobot social graph</a></span>  </div>  </div>
              </div>
            </div>
          </div>

      </div>  </div><!-- /.content -->
    </section><!-- /.block -->
    <section id="block-menu-menu-fields" class="block block-menu block-odd">
      <h2 class="block-title">Domains</h2>

      <div class="content">
        <ul class="menu clearfix"><li class="first leaf application lifecycle management"><a href="/alm" title="">DevOps</a></li>
          <li class="leaf java"><a href="/java" title="">Java</a></li>
          <li class="leaf javascript"><a href="/js" title="">JavaScript</a></li>
          <li class="leaf .net"><a href="/net" title="">Android</a></li>
          <li class="last leaf ruby on rails"><a href="/ror" title="">Ruby</a></li>
      </ul>  </div><!-- /.content -->
    </section><!-- /.block -->
    <section id="block-menu-menu-site-map" class="block block-menu block-even">
      <h2 class="block-title">Site Map</h2>

      <div class="content">
        <ul class="menu clearfix"><li class="first leaf about us"><a href="/about" title="">About Us</a></li>
          <li class="leaf active-trail solutions"><a href="/solutions" title="" class="active-trail active">Solutions</a></li>
          <li class="leaf careers"><a href="/careers" title="">Careers</a></li>
          <li class="leaf events"><a href="/events" title="">Events</a></li>
          <li class="last leaf contact"><a href="/contact" title="">Contact</a></li>
      </ul>  </div><!-- /.content -->
    </section><!-- /.block -->
    <div id="block-block-1" class="block block-block all-rights-reserved block-odd">

      <div class="content">
        <p>© 2013 All Rights Reserved. Tikal</p>
      </div><!-- /.content -->
    </div><!-- /.block -->
    <div id="block-menu-menu-external-links" class="block block-menu block-even">

      <div class="content">
        <ul class="menu clearfix"><li class="first leaf facebook"><a href="http://www.facebook.com/TikalKnowledge" title="" target="_blank">Facebook</a></li>
          <li class="leaf twitter"><a href="https://twitter.com/TikalK" title="" target="_blank">Twitter</a></li>
          <li class="leaf in"><a href="http://www.linkedin.com/company/tikal-knowledge" title="" target="_blank">in</a></li>
          <li class="last leaf rss"><a href="/rss-latest-articles" title="Latest Articles">RSS</a></li>
      </ul>  </div><!-- /.content -->
    </div><!-- /.block -->
  </div>
</footer>

    </body>
</html>
